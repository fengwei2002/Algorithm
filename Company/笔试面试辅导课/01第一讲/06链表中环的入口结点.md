![20211115200015-2021-11-15-20-00-17](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/images/20211115200015-2021-11-15-20-00-17.png)

[题目链接](https://www.acwing.com/problem/content/86/)

假设快慢指针相遇的地方是环中的 c 处，c 到 b 的距离为 y  
因为快指针移动的距离是慢指针移动距离的两倍，    
所以将慢指针从相遇点 c 移动到环的入口点 b 的时候，快指针移动到了从环的入口点向后的 c' 点    
b 到 c' 的位置为 y     
c 到 b 的距离为 y  

因为快指和慢指针的心走距离是二倍的关系，所以从 b 点开始走 x 步的话，可以走到 c' 点   

那么整个环的长度就是 y + x   

快慢指针都到了相遇点 c  

这时候只需要再让一个指针走回起点， 另一个指针从 c 点开始走，再次相遇的点就是环的入口  

``` cpp
class Solution {
public:
    ListNode *detectCycle(ListNode *head) {
        if (!head || !head->next) return nullptr;
        auto s = head, f = head;
        while (s && f) {
            if (s->next && f->next) {
                s = s->next, f = f->next;
                if (f->next) {
                    f = f->next;
                } else {
                    return nullptr;
                }
            } else {
                return nullptr;
            }
            // s = s->next, f = f->next;
            // f = f->next; 多加的 if 是为了判断空指针的情况，使用可能为空的指针之前要进行判断

            if (s == f) {
                s = head; 
                while (s != f) s = s->next, f = f->next;
                return s;
            }
        }
        return nullptr;
    }
};
```

GO


``` go
/**
 * Definition for singly-linked list.
 * type ListNode struct {
 *     Val int
 *     Next *ListNode
 * }
 */
func detectCycle(head *ListNode) *ListNode {
    s := head
    f := head
    for s != nil && f != nil {
        if s.Next != nil && f.Next != nil {
            s = s.Next
            f = f.Next;
            if f.Next != nil {
                f = f.Next
            } else {
                return nil
            }
        } else {
            return nil
        }
        
        if s == f {
            s = head
            for s != f {
                s = s.Next
                f = f.Next
            }
            return s
        }
    }

    return nil
}
```