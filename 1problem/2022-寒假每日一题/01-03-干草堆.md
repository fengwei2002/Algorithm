[原题链接](https://www.acwing.com/problem/content/2043/)  
https://github.com/fengwei2002/algorithm  


## 题目截图

![20220103143757-2022-01-03-14-37-59](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/images/20220103143757-2022-01-03-14-37-59.png)

## 思路

再一个区间内加上一个固定的值

执行 K 次，每次给定一个 `A B` 区间，在区间中的每一个草堆里面添加一个干草堆

将干草堆进行排序，然后输出中位数（总数是奇数）

## 代码

``` cpp 
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;

const int N = 1e6 + 10;
int a[N], b[N];
int n, k;

void insert(int l, int r, int c) {
    b[l] += c;
    b[r + 1] -= c; // 注意差分的 insert 函数是 b[l] += c, b[r + 1] -= c
}

int main() {
    cin >> n >> k;
    memset(a, 0, sizeof a);
    
    while (k--) {
        int l, r;
        cin >> l >> r;
        insert(l, r, 1);
    }
    for (int i = 1; i <= n; i++) {
        a[i] = a[i - 1] + b[i];
    }
    sort(a, a + n);
    cout << a[n / 2] << endl;
    return 0;
}
```