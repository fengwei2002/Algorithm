### 代码

```cpp
// LeetCode 题解区搜索 fengwei2002
// https://github.com/fengwei2002/algorithm

class Solution {
  public:
    string fractionToDecimal(int numerator, int denominator) {
        typedef long long LL;
        LL x = numerator, y = denominator;
        if (x % y == 0) return to_string(x / y); 

        string ans;
        if ((x < 0) ^ (y < 0)) ans += '-'; // 确定符号
        
        x = abs(x), y = abs(y);
        ans += to_string(x / y), x %= y; // 确定商和余数
        if (x) ans += '.';

        unordered_map<LL, int> hash; // 开哈希记录余数第一次出现的位置

        while (x) { // 当余数不等于 0 的时候，
            hash[x] = ans.size(); // 记录对应余数在字符串中该有的位置

            x *= 10;
            ans += to_string(x / y), x %= y; // 再次确定商和余数，商加到结果中，余数赋值为 x

            if (hash.find(x) != hash.end()) { // 当新计算得到的余数之前出现过，就说明出现了循环小数，就可以返回了
                ans = ans.substr(0, hash[x]) + '(' + ans.substr(hash[x]) + ')';
                // 0 开始的 长度为 hash[x] 代表之前商和小数点的长度
                // substr(hash[x]... end)  代表 循环节 的部分
                break;
            }
        }
        return ans;
    }
};
```

[题解链接](https://leetcode-cn.com/problems/fraction-to-recurring-decimal/solution/lc166-fengwei2002-gao-jing-du-chu-fa-ha-qg06m/)