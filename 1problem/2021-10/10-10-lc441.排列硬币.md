[题目链接](https://leetcode-cn.com/problems/arranging-coins/)  
[题解链接](https://leetcode-cn.com/problems/arranging-coins/solution/lc441-fengwei2002-er-fen-cha-zhao-by-kyc-gucy/)

https://github.com/fengwei2002/algorithm

### 思路


给你一个数字 n ，计算并返回可形成 完整阶梯行 的总行数。
阶梯的最后一行可能是不完整的

观察阶梯发现：总数量是公比为 1 的等差数列，首项为 1

$$S_n = \cfrac{1}{2}n(a_1 + a_n) = \cfrac{d}{2}n^2 + (a_1 - \cfrac{d}{2})n$$


$$S_n = \cfrac{1}{2}n^2 + \cfrac{1}{2}n = \cfrac{n(n + 1)}{2}$$


然后进行二分查找：

``` cpp
class Solution {
   public:
    int arrangeCoins(int n) {
        long long l = 1, r = n;
        while (l < r) {
            long long mid = (l + r + 1) >> 1;
            if (mid * (mid + 1) / 2 <= n) l = mid;
            else r = mid - 1;
        }
        return (int)l;
    }
};
```

注意 if 中的条件：除法次数尽可能的少写 因为存在舍去小数部分的逻辑

